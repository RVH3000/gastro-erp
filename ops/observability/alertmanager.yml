route:
  receiver: "default-webhook"
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 2h
  routes:
    - matchers: ["severity=~\"critical|warning\""]
      receiver: "slack-notifications"
    - matchers: ["severity=\"critical\""]
      receiver: "whatsapp-notifications"

receivers:
  - name: "default-webhook"
    webhook_configs:
      - url: "http://127.0.0.1:5001/alerts"
        send_resolved: true

  - name: "slack-notifications"
    slack_configs:
      - api_url: "${ALERTMANAGER_SLACK_URL}"
        channel: "#gastro-erp-alerts"
        send_resolved: true

  - name: "whatsapp-notifications"
    webhook_configs:
      - url: "${ALERTMANAGER_WHATSAPP_URL}"
        send_resolved: true
